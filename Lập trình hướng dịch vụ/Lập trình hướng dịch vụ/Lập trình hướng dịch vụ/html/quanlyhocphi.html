<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản Lý Học Phí</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/admin.css">
    <script src="../angular/angular.min.js"></script>
</head>

<body ng-app="UngDungQuanLy" ng-controller="HocPhiController">
    <div class="khungbao">

        <aside class="thanhben">
            <div class="dauthanhben">
                <i class="fa-solid fa-school bieutuonglogo"></i>
                <span>Mầm Non Sao Mai</span>
            </div>
            <ul class="menuthanhben">
                <li><a href="admin.html"><i class="fa-solid fa-chart-pie"></i> Tổng quan</a></li>
                <li><a href="quanlygiaovien.html"><i class="fa-solid fa-chalkboard-user"></i> Quản lý giáo viên</a></li>
                <li class="kichhoat"><a href="quanlyhocphi.html"><i class="fa-solid fa-money-check-dollar"></i> Quản lý
                        học phí</a></li>
                <li><a href="quanlyphancong.html"><i class="fa-solid fa-clipboard-list"></i> Quản lý phân công</a></li>
                <li><a href="quanlythoikhoabieu.html"><i class="fa-solid fa-calendar-days"></i> Quản lý TKB</a></li>
                <li><a href="quanlytaikhoan.html"><i class="fa-solid fa-users-gear"></i> Quản lý tài khoản</a></li>
                <li class="mucdangxuat">
                    <a href="dangnhap.html" onclick="dangXuat()"><i class="fa-solid fa-right-from-bracket"></i> Đăng xuất</a>
                </li>
            </ul>
        </aside>

        <main class="noidungchinh">

            <header class="dautrang">
                <div class="tieudetrang">
                    <h2>QUẢN LÝ HỌC PHÍ</h2>
                    <p>Theo dõi thu chi và trạng thái đóng học phí</p>
                </div>
            </header>

            <div class="khungnhaplieu">
                <h3 class="tieudekhung">Thông Tin Phiếu Thu</h3>
                <div class="luoihang">
                    <div class="nhaplieu">
                        <label>Mã Học Phí (*)</label>
                        <input type="text" ng-model="hp.MaHocPhi" placeholder="VD: HP01" ng-disabled="cheDoSua">
                    </div>
                    <div class="nhaplieu">
                        <label>Mã Học Sinh (*)</label>
                        <input type="text" ng-model="hp.MaHocSinh" placeholder="VD: HS01">
                    </div>
                    <div class="nhaplieu">
                        <label>Tháng Thu</label>
                        <input type="number" ng-model="hp.ThangThu" placeholder="VD: 9">
                    </div>
                    <div class="nhaplieu">
                        <label>Tổng Tiền</label>
                        <input type="number" ng-model="hp.TongTien" placeholder="VNĐ">
                    </div>
                    <div class="nhaplieu">
                        <label>Trạng Thái</label>
                        <select ng-model="hp.TrangThai">
                            <option value="Chưa đóng">Chưa đóng</option>
                            <option value="Đã đóng">Đã đóng</option>
                        </select>
                    </div>
                    <div class="nhaplieu">
                        <label>Ngày Thanh Toán</label>
                        <input type="datetime-local" ng-model="hp.NgayThanhToan">
                    </div>
                    <div class="nhaplieu">
                        <label>Hình Thức</label>
                        <select ng-model="hp.HinhThuc">
                            <option value="">-- Chọn hình thức --</option>
                            <option value="Tiền mặt">Tiền mặt</option>
                            <option value="Chuyển khoản">Chuyển khoản</option>
                            <option value="Ví điện tử">Ví điện tử</option>
                        </select>
                    </div>
                </div>

                <div class="daynutbam">
                    <button class="nutbam nutthem" ng-click="themMoi()" ng-if="!cheDoSua">
                        <i class="fa-solid fa-plus"></i> Tạo phiếu thu
                    </button>
                    <button class="nutbam nutsua" ng-click="capNhat()" ng-if="cheDoSua">
                        <i class="fa-solid fa-check"></i> Xác nhận thanh toán (Sửa)
                    </button>
                    <button class="nutbam nutxoa" ng-click="xoa()" ng-if="cheDoSua">
                        <i class="fa-solid fa-trash"></i> Xóa phiếu
                    </button>
                    <button class="nutbam nutlammoi" ng-click="lamMoi()">
                        <i class="fa-solid fa-rotate-right"></i> Làm mới
                    </button>
                </div>
            </div>

            <div class="banghienthi">
                <table class="bangdulieu">
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th>Mã HP</th>
                            <th>Mã HS</th>
                            <th>Tháng</th>
                            <th>Tổng Tiền</th>
                            <th>Trạng Thái</th>
                            <th>Ngày Đóng</th>
                            <th>Hình Thức</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="item in dsHocPhi" ng-click="chonDong(item)" class="dongdulieu">
                            <td>{{$index + 1}}</td>
                            <td>{{item.maHocPhi}}</td>
                            <td style="font-weight:bold;">{{item.maHocSinh}}</td>
                            <td>Tháng {{item.thangThu}}</td>
                            <td style="color:#d32f2f; font-weight:bold;">{{item.tongTien | number}} đ</td>

                            <td>
                                <span class="nhan" ng-style="{'background': item.trangThai === 'Đã đóng' ? '#d4edda' : '#f8d7da', 
                                                 'color': item.trangThai === 'Đã đóng' ? '#155724' : '#721c24'}">
                                    {{item.trangThai}}
                                </span>
                            </td>

                            <td>{{item.ngayThanhToan | date:'dd/MM/yyyy HH:mm'}}</td>
                            <td>{{item.hinhThuc}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </main>
    </div>

    <script src="../js/quanlyhocphi.js"></script>
    <script src="../js/admin.js"></script>
</body>

</html>